from calculations.calc_generally import screen_hcenter, screen_height, screen_width
from PyQt5 import QtGui

#calculate confirm button geometry
confirm_button_height = int(screen_height*0.1)
confirm_button_width = int(screen_width*0.2)
confirm_button_x = int(screen_hcenter - confirm_button_width/2)
confirm_button_y = int(screen_height*0.80)

#calculate keyboard grid geometry
keyboard_grid_height = int(screen_height*0.47)
keyboard_grid_width = int(screen_width*0.7)
keyboard_grid_x = int(screen_hcenter - keyboard_grid_width/2)
keyboard_grid_y = int(screen_height*0.29)

#calcuate line edit geometry
line_edit_height = int(screen_height*0.08)
line_edit_width = int(screen_width*0.2)
line_edit_x = int(screen_hcenter - line_edit_width/2)
line_edit_y = int(screen_height*0.13)

#calculate error message geometry
error_message_height = int(screen_height*0.05)
error_message_width = int(screen_width*0.4)
error_message_x = int(screen_hcenter - error_message_width/2)
error_message_y = int(screen_height*0.22)
                 
#calculate filepath button geometry              
filepath_button_height = int(screen_height*0.05)
filepath_button_width = int(screen_width*0.1)
filepath_button_x = int(screen_width*0.88)
filepath_button_y = int(screen_height*0.92)

#calculate filepath label geometry
filepath_label_height = int(screen_height*0.05)
filepath_label_width = int(screen_width*0.87)
filepath_label_x = 0
filepath_label_y = int(screen_height*0.92)

#calculate popup geometry
popup_height = int(screen_height*0.8)
popup_width = int(screen_width*0.8)
popup_x = int(screen_hcenter - popup_width/2)
popup_y = int(screen_height*0.1)

#calculate max font size for filepath label
def set_max_font_size_label_filepath(label):
    label_width = label.width()
    label_height = label.height()

    font = label.font()
    font_metrics = QtGui.QFontMetrics(font)

    text = label.text()
    text_width = font_metrics.width(text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(label_width * 0.5 / text_width, label_height * 0.5 / text_height) * font.pointSize()

    return int(max_font_size)

#calculate max font size for keyboard buttons
def set_max_font_size_buttons_keyboard(button):
    button_width = button.width()
    button_height = button.height()

    font = button.font()
    font_metrics = QtGui.QFontMetrics(font)

    text = button.text()
    text_width = font_metrics.width(text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(button_width * 1.5 / text_width, button_height * 1.5 / text_height) * font.pointSize()

    return int(max_font_size)

#calculate max font size for filepath button
def set_max_font_size_button_filepath(button):
    button_width = button.width()
    button_height = button.height()

    font = button.font()
    font_metrics = QtGui.QFontMetrics(font)

    text = button.text()
    text_width = font_metrics.width(text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(button_width * 0.9 / text_width, button_height * 0.9 / text_height) * font.pointSize()

    return int(max_font_size)

#calculate max font size for line edit
def set_max_font_size_line_edit(line_edit):
    line_edit_width = line_edit.width()
    line_edit_height = line_edit.height()

    font = line_edit.font()
    font_metrics = QtGui.QFontMetrics(font)

    placeholder_text = line_edit.placeholderText()
    text_width = font_metrics.width(placeholder_text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(line_edit_width * 0.7 / text_width, line_edit_height * 0.7 / text_height) * font.pointSize()

    return int(max_font_size)