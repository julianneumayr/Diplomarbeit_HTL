import sys
from ui.main_window import UiMainWindow
from PyQt5 import QtWidgets, QtGui

app = QtWidgets.QApplication(sys.argv)  # create app

main_window = UiMainWindow()

#calculate screen geometry
screen_geometry = main_window.get_screen_geometry() 
screen_height = screen_geometry.height() 
screen_width = screen_geometry.width()
screen_hcenter = screen_geometry.center().x()
screen_vcenter = screen_geometry.center().y()

#calculate confirm button geometry
confirm_button_height = int(screen_height*0.1)
confirm_button_width = int(screen_width*0.2)
confirm_button_x = int(screen_hcenter - confirm_button_width/2)
confirm_button_y = int(screen_height*0.87)

#calculate header geometry
header_height = int(screen_height*0.1)
header_width = int(screen_width*0.5)
header_x = int(screen_hcenter - header_width/2)
header_y = int(screen_height*0.02)

#calculate logout button geometry
logout_button_height = int(screen_height*0.05)
logout_button_width = int(screen_width*0.1)
logout_button_x = int(screen_width*0.03)
logout_button_y = int(screen_height*0.03)

#calculate grid geometry
grid_height = int(screen_height*0.65)
grid_width = int(screen_width*0.7)
grid_x = int(screen_hcenter - grid_width/2)
grid_y = int(screen_height*0.18)

#calculate error message geometry
error_message_height = int(screen_height*0.05)
error_message_width = int(screen_width*0.4)
error_message_x = int(screen_hcenter - error_message_width/2)
error_message_y = int(screen_height*0.12)

#calculate tool selection button geometry
toolselection_button_height = int(screen_height*0.05)
toolselection_button_width = int(screen_width*0.15)
toolselection_button_x = int(screen_width*0.82)
toolselection_button_y = int(screen_height*0.03)

#calculate max font size for header labels
def set_max_font_size_label(label):
    label_width = label.width()
    label_height = label.height()

    font = label.font()
    font_metrics = QtGui.QFontMetrics(font)

    text = label.text()
    text_width = font_metrics.width(text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(label_width * 0.8 / text_width, label_height * 0.8 / text_height) * font.pointSize()

    return int(max_font_size)

#calculate max font size for confirm buttons
def set_max_font_size_button_confirm(button):
    button_width = button.width()
    button_height = button.height()

    font = button.font()
    font_metrics = QtGui.QFontMetrics(font)

    text = button.text()
    text_width = font_metrics.width(text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(button_width * 0.5 / text_width, button_height * 0.5 / text_height) * font.pointSize()

    return int(max_font_size)

#calculate max font size for logout button
def set_max_font_size_button_logout(button):
    button_width = button.width()
    button_height = button.height()

    font = button.font()
    font_metrics = QtGui.QFontMetrics(font)

    text = button.text()
    text_width = font_metrics.width(text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(button_width * 0.8 / text_width, button_height * 0.8 / text_height) * font.pointSize()

    return int(max_font_size)

#calculate max font size for tool selection button
def set_max_font_size_button_tool_selection(button):
    button_width = button.width()
    button_height = button.height()

    font = button.font()
    font_metrics = QtGui.QFontMetrics(font)

    text = button.text()
    text_width = font_metrics.width(text)
    text_height = font_metrics.height()

    # Bestimme die maximale Schriftgröße, die in das Label passt
    max_font_size = min(button_width * 0.9 / text_width, button_height * 0.9 / text_height) * font.pointSize()

    return int(max_font_size)