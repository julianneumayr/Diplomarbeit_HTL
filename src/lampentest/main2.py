import time

import gpio
from main import LightTester

lighttester = LightTester()

if __name__ == "__main__":
    gpio.init()
    gpio.close_lock()
    gpio.close_cover()
    gpio.activate_main_voltage()
    try:
        while True:
            if not lighttester.light_turned_off():
                print(f"Light turned on: {time.time()}")
                time.sleep(30)
    except KeyboardInterrupt:
        gpio.deactivate_voltage()
        gpio.open_lock()
        gpio.open_cover()
        time.sleep(25)
        gpio.cleanup()
